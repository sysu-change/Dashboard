# 架构设计、详细设计（BCE方法）到应用程序框架映射指南

## 框架目录设计与逻辑架构与BCE的关系

### 框架目录设计与逻辑架构

- **框架目录设计：**框架目录是为了服务开发人员，而非限制开发人员。 框架本身并不关注业务，至少不受业务影响或制约。框架就是要从具体的业务功能中，分离出能覆盖所有业务的设计、实现与组成，并使得各业务功能从开发实现的角度，变得解耦合、可重组、易维护。 不同的架构方法论，会将架构分为不同视图，每个视图侧重某一个方面、领域的问题

- **逻辑架构：**其关注的是功能，包含用户直接可见的功能，还有系统中隐含的功能。或者更加通俗来描述，逻辑架构更偏向我们日常所理解的“分层”，由四层模型（表示层、业务层、服务层、持久化层）构成

    #### 表示层

    - 使用 Web 作为表示层，提供问卷子系统、任务子系统、投诉子系统、订单管理子系统、收入统计子系统等

    #### 业务层

    - 服务器充当业务层的角色，为表示层的各个子系统提供相应的服务模块，解释用户的输入并依照用户的输入调用服务

    #### 服务层

    - 从各种数据访问对象检索和创建模型，更新各个存储库的值，执行特定于应用程序的逻辑和操作等。

    #### 持久化层

    - MySQL 提供了数据的持久化服务

### BCE

- **Boundary 对象**：表示参与者与系统之间进行的交互以及信息交流 ，包括 UI、外部系统接口
- **Controller 对象**：处理外部事件，实现控制流的类，具有控制行为。通常是一个子系统、一个用例一个类
- **Entity 对象**：表示数据库中存储的信息及相关行为，领域对象或数据实体

### 两者关系

BCE是框架目录设计与逻辑架构的一种具体方法

## 后端目录结构

```
├─ api
│  ├─ account
│  │  ├─ __init__.py
│  │  ├─ account_function.py
│  │  └─ utils.py
│  ├─ questionnaire
│  │  ├─ __init__.py
│  │  ├─ ans_function.py
│  │  ├─ que_function.py
│  │  └─ utils.py
│  ├─ task
│  │  ├─ __init__.py
│  │  ├─ task_function.py
│  │  └─ utils.py
│  ├─ utils
│  │  ├─ __init__.py
│  │  ├─ assist.py
│  │  ├─ match.py
│  │  └─ utils.py
│  └─ __init__.py
├─ dbTools
│  ├─ __init__.py
│  ├─ dbConfig.py
│  └─ dbTools.py
└─ app.py

```

## 前段目录结构

## 与BCE映射关系

BCE中：

- Boundary：与用户的接口，如：界面、网关、代理等
- Controller：连接 Boundary 和 Entity 的媒介，编排来自 Boundary 的命令的执行
- Entity：代表系统数据，如：账号，问卷，任务，投诉单等

在本系统中，Boundary包含：

- Web 程序用户界面

Controller 包含：

- 服务器框架目录设计中，`app.py` 文件定义了和boundary交互的api逻辑交互的接口，
- 服务器框架目录设计中，`api` 目录下定义了所有相关内容，接受上树app.py解释的命令，封装可能在控制器中的所有业务逻辑。这样，控制器就在那里转发和控制执行。

Entity 包含：

- 服务器框架目录设计中，`api` 目录下定义了与数据库中相关的实体，承载系统数据